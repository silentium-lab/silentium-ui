{"version":3,"file":"silentium-ui.min.mjs","sources":["../src/ClassName.ts","../src/Clicked.ts","../src/html.ts","../src/Id.ts","../src/Button.ts","../src/Checkbox.ts","../src/KeyPressed.ts","../src/Input.ts","../src/Link.ts","../src/LinkExternal.ts","../src/Mount.ts","../src/MountPoint.ts","../src/Select.ts","../src/Textarea.ts"],"sourcesContent":["import { Applied, MessageType } from \"silentium\";\n\n/**\n * CSS class name representation\n */\nexport function ClassName(s: MessageType<string>) {\n  return Applied<string, string>(s, (s) => \".\" + s);\n}\n","import { Message, MessageType } from \"silentium\";\n\n/**\n * DOM element click even\n */\nexport function Clicked($class: MessageType<string>) {\n  return Message<Event>((resolve) => {\n    let className = \".no-class-of-such-name\";\n    const handler = (event: PointerEvent) => {\n      const target = event.target as HTMLElement;\n      if (!target) {\n        return;\n      }\n      if (target.classList.contains(className)) {\n        resolve(event);\n      }\n      const closestElement = target.closest(className);\n      if (closestElement) {\n        resolve(event);\n      }\n    };\n    $class.then((newClassName) => {\n      className = newClassName;\n      (handler as any).className = newClassName;\n      document.body.addEventListener(\"click\", handler);\n    });\n\n    return () => {\n      document.body.removeEventListener(\"click\", handler);\n    };\n  });\n}\n","/**\n * Render html string\n */\nexport function html(strings: any, ...values: any[]) {\n  let result = \"\";\n  for (let i = 0; i < strings.length; i++) {\n    result += strings[i];\n    if (i < values.length) {\n      result += values[i];\n    }\n  }\n  return result;\n}\n","import { All, Applied, MessageType, Of } from \"silentium\";\nimport { v4 } from \"uuid\";\n\n/**\n * Representation of a unique id\n */\nexport function Id(baseSrc: MessageType<string> = Of(\"id\")) {\n  return Applied(All(baseSrc, Of(v4())), (v) => v.join(\"_\"));\n}\n","import {\n  ActualMessage,\n  Connected,\n  MaybeMessage,\n  Of,\n  Shared,\n  SourceType,\n} from \"silentium\";\nimport { Template } from \"silentium-components\";\nimport { ClassName } from \"./ClassName\";\nimport { Clicked } from \"./Clicked\";\nimport { html } from \"./html\";\nimport { Id } from \"./Id\";\n\nexport function Button(\n  $label: MaybeMessage<string>,\n  $class: MaybeMessage<string>,\n  click: SourceType,\n  $attributes: MaybeMessage<string> = Of(\"\"),\n  value?: unknown,\n) {\n  const $id = Shared(Id());\n  const clicked = Clicked(ClassName($id));\n  clicked.then((e) => {\n    e.preventDefault();\n    click.use(value ?? e);\n  });\n  return Connected<string>(\n    Template(\n      (t) =>\n        html`<button\n          ${t.escaped(ActualMessage($attributes))}\n          class=\"${t.escaped($id)} ${t.escaped(\n            ActualMessage($class),\n          )} cursor-pointer\"\n        >\n          ${t.escaped(ActualMessage($label))}\n        </button>`,\n    ),\n    clicked,\n  );\n}\n","import {\n  ActualMessage,\n  All,\n  FromEvent,\n  MaybeMessage,\n  Message,\n  MessageSourceType,\n  Shared,\n} from \"silentium\";\nimport { Template } from \"silentium-components\";\nimport { Element } from \"silentium-web-api\";\nimport { ClassName } from \"./ClassName\";\nimport { html } from \"./html\";\nimport { Id } from \"./Id\";\n\n/**\n * Component what represent\n * checkbox\n */\nexport function Checkbox(\n  label: MaybeMessage<string>,\n  $value: MessageSourceType<boolean>,\n) {\n  const $label = ActualMessage(label);\n  return Template(\n    (t) => html`\n      <label>\n        <input class=\"${t.escaped(CheckedId($value))} \" type=\"checkbox\" />\n        ${t.escaped($label)}\n      </label>\n    `,\n  );\n}\n\nexport function CheckedId($value: MessageSourceType<boolean>) {\n  return Message<string>((resolve, reject) => {\n    const $id = Shared(Id());\n    $id.then(resolve);\n\n    const $el = Shared(Element<HTMLInputElement>(ClassName($id)));\n\n    All($el, $value).then(([el, value]) => {\n      if (el) {\n        el.checked = value;\n      }\n    });\n\n    const event = FromEvent<Event>(\n      $el,\n      \"change\",\n      \"addEventListener\",\n      \"removeEventListener\",\n    )\n      .catch(reject)\n      .then((e) => {\n        $value.use((e.target as HTMLInputElement).checked);\n      });\n\n    return () => {\n      event.destroy();\n    };\n  });\n}\n","import { FromEvent, MessageType, Of } from \"silentium\";\n\n/**\n * DOM element keypress even\n */\nexport function KeyPressed<T extends Event>($el: MessageType<HTMLElement>) {\n  return FromEvent<T>(\n    $el,\n    Of(\"keyup\"),\n    Of(\"addEventListener\"),\n    Of(\"removeEventListener\"),\n  );\n}\n","import { All, Message, MessageSourceType, Shared } from \"silentium\";\nimport { Task, Template } from \"silentium-components\";\nimport { Element } from \"silentium-web-api\";\nimport { html } from \"./html\";\nimport { Id } from \"./Id\";\nimport { ClassName } from \"./ClassName\";\nimport { KeyPressed } from \"./KeyPressed\";\n\nexport function Input($value: MessageSourceType<string>) {\n  return Template(\n    (t) => html`\n      <input\n        name=\"title\"\n        class=\"${t.escaped(\n          InputId($value),\n        )} border-1 border-gray-300 bg-white p-2 rounded-sm w-full\"\n      />\n    `,\n  );\n}\n\nexport function InputId($value: MessageSourceType<string>) {\n  return Message<string>((transport) => {\n    const $id = Shared(Id());\n    $id.then(transport);\n\n    const $el = Shared(Element<HTMLInputElement>(ClassName($id)));\n\n    All($el, $value).then(([el, value]) => {\n      if (el) {\n        el.value = value;\n      }\n    });\n\n    const pressed = KeyPressed<InputEvent>($el);\n    Task(pressed, 150).then((e: InputEvent) => {\n      $value.use((e.target as HTMLInputElement).value);\n    });\n  });\n}\n","import { MessageType, Of, Primitive, Shared, Context } from \"silentium\";\nimport { Template } from \"silentium-components\";\nimport { ClassName } from \"./ClassName\";\nimport { Clicked } from \"./Clicked\";\nimport { html } from \"./html\";\nimport { Id } from \"./Id\";\n\nexport function Link(\n  $linkUrl: MessageType<string>,\n  $text: MessageType<string>,\n  $class: MessageType<string> = Of(\"\"),\n) {\n  const $url = Context<string>(\"url\");\n  const $id = Shared(Id());\n  const url = Primitive($linkUrl);\n\n  const clicked = Clicked(ClassName($id));\n  clicked.then((e: Event) => {\n    e.preventDefault();\n    $url.use(url.primitive() as string);\n  });\n\n  return Template(\n    (t) =>\n      html`<a\n        href=\"${t.escaped($linkUrl)}\"\n        class=\"${t.escaped($id)} ${t.escaped($class)}\"\n      >\n        ${t.raw($text)}\n      </a>`,\n  );\n}\n","import { MessageType, Of } from \"silentium\";\nimport { Template } from \"silentium-components\";\nimport { html } from \"./html\";\n\nexport function LinkExternal(\n  $url: MessageType<string>,\n  $text: MessageType<string>,\n  $class: MessageType<string> = Of(\"\"),\n) {\n  return Template(\n    (t) =>\n      html`<a\n        href=\"${t.escaped($url)}\"\n        target=\"_blank\"\n        class=\"${t.escaped($class)}\"\n      >\n        ${t.escaped($text)}\n      </a>`,\n  );\n}\n","import {\n  Applied,\n  DestroyContainer,\n  Message,\n  MessageType,\n  Of,\n  Shared,\n  Void,\n} from \"silentium\";\nimport { Render } from \"silentium-morphdom\";\nimport { Element } from \"silentium-web-api\";\nimport { ClassName } from \"./ClassName\";\nimport { Id } from \"./Id\";\n\nexport function Mount($base: MessageType<string>, tag: string = \"div\") {\n  return Message<string>((resolve, reject) => {\n    const dc = DestroyContainer();\n    const $id = Shared(Id(Of(\"mount-point\")));\n    Applied($id, (id) => `<${tag} class=\"${id}\"></${tag}>`).then(resolve);\n    const $el = Element(ClassName($id)).catch(reject);\n    const $r = Render($el, $base).catch(reject).then(Void());\n    dc.add($el);\n    dc.add($r);\n\n    return () => {\n      dc.destroy();\n    };\n  });\n}\n","import { Message, MessageType, Of, Shared, Void } from \"silentium\";\nimport { Render } from \"silentium-morphdom\";\nimport { Element } from \"silentium-web-api\";\nimport { ClassName } from \"./ClassName\";\nimport { Id } from \"./Id\";\n\n/**\n * Returns a unique class id that needs to be used\n * in the template for mounting $base.\n * This technique allows decoupling\n * the rendering of the main template from the rendering\n * of some nested part.\n */\nexport function MountPoint($base: MessageType<string>) {\n  return Message<string>((transport) => {\n    const $id = Shared(Id(Of(\"mount-point\")));\n    $id.then(transport);\n    const $el = Element(ClassName($id));\n    Render($el, $base).then(Void());\n  });\n}\n","import {\n  All,\n  Applied,\n  FromEvent,\n  Message,\n  MessageSourceType,\n  MessageType,\n  Shared,\n} from \"silentium\";\nimport { Template } from \"silentium-components\";\nimport { Element } from \"silentium-web-api\";\nimport { html } from \"./html\";\nimport { Id } from \"./Id\";\nimport { ClassName } from \"./ClassName\";\n\nexport function Select(\n  $value: MessageSourceType<string>,\n  $items: MessageType<unknown[]>,\n) {\n  return Template(\n    (t) => html`\n      <select\n        class=\"${t.escaped(\n          SelectId($value),\n        )} border-1 border-gray-300 bg-white p-2 rounded-sm w-full\"\n      >\n        <option value=\"\"></option>\n        ${t.raw(\n          Applied($items, (s) =>\n            s\n              .map(\n                (i: any) => html`<option value=\"${i._id}\">${i.title}</option>`,\n              )\n              .join(\"\"),\n          ),\n        )}\n      </select>\n    `,\n  );\n}\n\nexport function SelectId($value: MessageSourceType<string>) {\n  return Message<string>((resolve, reject) => {\n    const $id = Shared(Id());\n    $id.then(resolve);\n\n    const $el = Shared(Element<HTMLInputElement>(ClassName($id)));\n\n    All($el, $value).then(([el, value]) => {\n      if (el) {\n        el.value = value;\n      }\n    });\n\n    const event = FromEvent<Event>(\n      $el,\n      \"change\",\n      \"addEventListener\",\n      \"removeEventListener\",\n    )\n      .catch(reject)\n      .then((e) => {\n        $value.use((e.target as HTMLInputElement).value);\n      });\n\n    return () => {\n      event.destroy();\n    };\n  });\n}\n","import { MessageSourceType } from \"silentium\";\nimport { Template } from \"silentium-components\";\nimport { html } from \"./html\";\nimport { InputId } from \"./Input\";\n\n/**\n * Textarea UI element\n */\nexport function Textarea($value: MessageSourceType<string>) {\n  return Template(\n    (t) => html`\n      <textarea\n        rows=\"3\"\n        class=\"${t.escaped(\n          InputId($value),\n        )} border-1 border-gray-300 bg-white p-2 rounded-sm w-full\"\n      ></textarea>\n    `,\n  );\n}\n"],"names":["ClassName","s","Applied","Clicked","$class","Message","resolve","className","handler","event","target","classList","contains","closest","then","newClassName","document","body","addEventListener","removeEventListener","html","strings","values","result","i","length","Id","baseSrc","Of","All","v4","v","join","Button","$label","click","$attributes","value","$id","Shared","clicked","e","preventDefault","use","Connected","Template","t","escaped","ActualMessage","Checkbox","label","$value","CheckedId","reject","$el","Element","el","checked","FromEvent","catch","destroy","KeyPressed","Input","InputId","transport","pressed","Task","Link","$linkUrl","$text","$url","Context","url","Primitive","primitive","raw","LinkExternal","Mount","$base","tag","dc","DestroyContainer","id","$r","Render","Void","add","MountPoint","Select","$items","SelectId","map","_id","title","Textarea"],"mappings":"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"}